import{d as F,r as g,p as T,q as k,c as n,a as s,t as y,m as i,b as f,s as w,u as m,v as q,h as C,j as B,x as _,y as P,F as x,e as h,z as O,n as j,o as l}from"./app-D26Fj0MA.js";import{S as R,X,C as G,a as H}from"./x-C9NMnROS.js";import{T as J,C as K,a as Q}from"./trash-2-C-d2sTck.js";const W={class:"rounded-xl bg-white p-6 shadow"},Y={class:"text-lg font-semibold text-gray-800"},Z={class:"mb-4 flex flex-col gap-3 md:flex-row md:items-center md:justify-between"},ee={class:"relative"},te={class:"overflow-x-auto rounded-lg border border-gray-200"},se={class:"min-w-full divide-y divide-gray-200 text-sm"},le={class:"bg-gray-50"},ae={key:0,class:"px-4 py-3 text-left"},ne=["onClick"],oe={class:"flex items-center gap-1"},re={class:"divide-y divide-gray-100"},ue={key:0,class:"px-4 py-2"},de=["value"],ie={class:"space-x-2 px-4 py-2 text-right"},ce=["onClick"],ve={key:0},ge=["colspan"],ye={class:"mt-4 flex flex-col gap-3 md:flex-row md:items-center md:justify-between"},me={class:"flex items-center gap-2 text-sm text-gray-600"},pe=["value"],be={class:"flex items-center gap-1"},xe=["disabled"],he=["onClick"],fe=["disabled"],Se=F({__name:"DataTable",props:{title:{},data:{},columns:{},actions:{},selectable:{type:Boolean},showAddButton:{type:Boolean},addButtonText:{},addButtonIcon:{}},emits:["add","update:selected","deleteMultiple"],setup(r,{emit:N}){const A=r,U=N,p=g(""),u=g([]),S=g(!1),d=g(1),b=g(10),c=g(null),v=g("asc");T(u,o=>U("update:selected",o));const M=k(()=>{if(!p.value)return A.data;const o=p.value.toLowerCase();return A.data.filter(t=>Object.values(t).some(e=>String(e).toLowerCase().includes(o)))}),D=k(()=>c.value?[...M.value].sort((o,t)=>{const e=o[c.value],a=t[c.value];return e==null||a==null?0:typeof e=="number"&&typeof a=="number"?v.value==="asc"?e-a:a-e:v.value==="asc"?String(e).localeCompare(String(a)):String(a).localeCompare(String(e))}):M.value),V=k(()=>Math.ceil(D.value.length/b.value)),$=k(()=>{const o=(d.value-1)*b.value;return D.value.slice(o,o+b.value)});T([b,D],()=>d.value=1);const L=o=>{c.value===o?v.value=v.value==="asc"?"desc":"asc":(c.value=o,v.value="asc")},I=()=>{const o=$.value.map(t=>t.id);S.value?u.value=Array.from(new Set([...u.value,...o])):u.value=u.value.filter(t=>!o.includes(t))},z=()=>{d.value>1&&d.value--},E=()=>{d.value<V.value&&d.value++};return(o,t)=>(l(),n("div",W,[s("h2",Y,y(r.title),1),s("div",Z,[s("div",ee,[f(m(R),{class:"absolute top-2.5 left-3 h-4 w-4 text-gray-400"}),w(s("input",{"onUpdate:modelValue":t[0]||(t[0]=e=>p.value=e),type:"text",placeholder:"Buscar...",class:"rounded-lg border py-2 pr-3 pl-9 text-sm focus:ring-2 focus:ring-green-500 focus:outline-none"},null,512),[[q,p.value]]),p.value?(l(),n("button",{key:0,onClick:t[1]||(t[1]=e=>p.value=""),class:"absolute top-2 right-2 text-gray-400 hover:text-gray-600"},[f(m(X),{class:"h-4 w-4"})])):i("",!0)]),r.showAddButton?(l(),n("button",{key:0,onClick:t[2]||(t[2]=e=>o.$emit("add")),class:"flex items-center gap-2 rounded-lg bg-green-600 px-4 py-2 text-white transition hover:bg-green-700"},[(l(),C(_(r.addButtonIcon),{class:"h-4 w-4"})),B(" "+y(r.addButtonText),1)])):i("",!0)]),s("div",te,[s("table",se,[s("thead",le,[s("tr",null,[r.selectable?(l(),n("th",ae,[w(s("input",{type:"checkbox","onUpdate:modelValue":t[3]||(t[3]=e=>S.value=e),onChange:I,class:"rounded border-gray-300 text-green-600 focus:ring-green-500"},null,544),[[P,S.value]])])):i("",!0),(l(!0),n(x,null,h(r.columns,e=>(l(),n("th",{key:e.key,onClick:a=>L(e.key),class:"cursor-pointer px-4 py-3 text-left font-semibold tracking-wider text-gray-600 uppercase select-none"},[s("div",oe,[B(y(e.label)+" ",1),c.value===e.key&&v.value==="asc"?(l(),C(m(Q),{key:0,class:"h-4 w-4 text-green-600"})):i("",!0),c.value===e.key&&v.value==="desc"?(l(),C(m(H),{key:1,class:"h-4 w-4 text-green-600"})):i("",!0)])],8,ne))),128)),t[7]||(t[7]=s("th",{class:"px-4 py-3 text-right font-semibold tracking-wider text-gray-600 uppercase"}," Acciones ",-1))])]),s("tbody",re,[(l(!0),n(x,null,h($.value,e=>(l(),n("tr",{key:e.id,class:"transition hover:bg-gray-50"},[r.selectable?(l(),n("td",ue,[w(s("input",{type:"checkbox",value:e.id,"onUpdate:modelValue":t[4]||(t[4]=a=>u.value=a),class:"rounded border-gray-300 text-green-600 focus:ring-green-500"},null,8,de),[[P,u.value]])])):i("",!0),(l(!0),n(x,null,h(r.columns,a=>(l(),n("td",{key:a.key,class:"px-4 py-2 text-gray-700"},y(e[a.key]),1))),128)),s("td",ie,[(l(!0),n(x,null,h(r.actions,a=>(l(),n("button",{key:a.label,onClick:ke=>a.onClick(e),class:j(["inline-flex items-center justify-center rounded p-1 transition hover:bg-gray-100",a.color])},[(l(),C(_(a.icon),{class:"h-4 w-4"}))],10,ce))),128))])]))),128)),$.value.length===0?(l(),n("tr",ve,[s("td",{colspan:r.columns.length+(r.selectable?2:1),class:"py-4 text-center text-gray-500"}," No se encontraron resultados. ",8,ge)])):i("",!0)])])]),s("div",ye,[s("div",me,[t[8]||(t[8]=s("span",null,"Mostrar",-1)),t[9]||(t[9]=B("serrun dev ",-1)),w(s("select",{"onUpdate:modelValue":t[5]||(t[5]=e=>b.value=e),class:"rounded-lg border px-2 py-1 focus:ring-2 focus:ring-green-500"},[(l(),n(x,null,h([10,25,50,100],e=>s("option",{key:e,value:e},y(e),9,pe)),64))],512),[[O,b.value,void 0,{number:!0}]]),t[10]||(t[10]=s("span",null,"elementos",-1))]),r.selectable&&u.value.length>0?(l(),n("button",{key:0,onClick:t[6]||(t[6]=e=>o.$emit("deleteMultiple",u.value)),class:"flex items-center gap-2 rounded-lg bg-red-600 px-4 py-2 text-white transition hover:bg-red-700"},[f(m(J),{class:"h-4 w-4"}),B(" Eliminar ("+y(u.value.length)+") ",1)])):i("",!0),s("div",be,[s("button",{onClick:z,disabled:d.value===1,class:"rounded border p-2 hover:bg-gray-100 disabled:opacity-50"},[f(m(K),{class:"h-4 w-4"})],8,xe),(l(!0),n(x,null,h(V.value,e=>(l(),n("button",{key:e,onClick:a=>d.value=e,class:j(["rounded border px-3 py-1 text-sm",d.value===e?"border-green-600 bg-green-600 text-white":"text-gray-700 hover:bg-gray-100"])},y(e),11,he))),128)),s("button",{onClick:E,disabled:d.value===V.value,class:"rounded border p-2 hover:bg-gray-100 disabled:opacity-50"},[f(m(G),{class:"h-4 w-4"})],8,fe)])])]))}});export{Se as _};
