import{_ as u}from"./InputError.vue_vue_type_script_setup_true_lang-BYws7akC.js";import{_ as x}from"./index-BGIjxwLZ.js";import{_ as p}from"./Input.vue_vue_type_script_setup_true_lang-agB7sjSy.js";import{_ as c}from"./Label.vue_vue_type_script_setup_true_lang-DqomGY5I.js";import{d as U,r as k,p as B,h as V,w as i,a as w,c as y,m as _,b as a,u as o,j as d,o as f,t as N,D as S}from"./app-DnKpNPqA.js";import{u as q}from"./useGlobalMessage-C66-k3Ia.js";import{L as $}from"./loader-circle-BKP4I4-W.js";const z={class:"grid gap-6"},D={class:"grid gap-2"},M={class:"grid gap-2"},j={key:0,class:"grid gap-2"},G={key:1,class:"grid gap-2"},J=U({__name:"UserModal",props:{user:{type:Object,default:null},isEdit:{type:Boolean,default:!1}},emits:["saved"],setup(E,{emit:b}){const g=b,{showGlobalMessage:m}=q(),l=E,s=k({name:"",email:"",password:"",password_confirmation:""});B(()=>l.user,r=>{r?(s.value.name=r.name,s.value.email=r.email):s.value={name:"",email:"",password:"",password_confirmation:""}},{immediate:!0});const C=async r=>{try{l.isEdit?r.put(route("admin.users.update",l.user.id),{onSuccess:()=>{m("Usuario actualizado correctamente.","success"),g("saved")},onError:()=>m("Error al actualizar el usuario.","error")}):r.post(route("register"),{onSuccess:()=>{m("Usuario creado correctamente.","success"),g("saved")},onError:()=>m("Error al crear el usuario.","error"),onFinish:()=>{r.reset("password","password_confirmation")}})}catch(e){console.error(e),m("Error inesperado en el formulario.","error")}};return(r,e)=>(f(),V(o(S),{data:s.value,onSubmit:C,class:"flex flex-col gap-6"},{default:i(({errors:n,processing:v})=>[w("div",z,[w("div",D,[a(o(c),{for:"name"},{default:i(()=>[...e[4]||(e[4]=[d("Nombre completo",-1)])]),_:1}),a(o(p),{id:"name",name:"name",type:"text",required:"",autocomplete:"name",modelValue:s.value.name,"onUpdate:modelValue":e[0]||(e[0]=t=>s.value.name=t)},null,8,["modelValue"]),a(u,{message:n.name},null,8,["message"])]),w("div",M,[a(o(c),{for:"email"},{default:i(()=>[...e[5]||(e[5]=[d("Correo electrónico",-1)])]),_:1}),a(o(p),{id:"email",name:"email",type:"email",required:"",autocomplete:"email",modelValue:s.value.email,"onUpdate:modelValue":e[1]||(e[1]=t=>s.value.email=t)},null,8,["modelValue"]),a(u,{message:n.email},null,8,["message"])]),l.isEdit?_("",!0):(f(),y("div",j,[a(o(c),{for:"password"},{default:i(()=>[...e[6]||(e[6]=[d("Contraseña",-1)])]),_:1}),a(o(p),{id:"password",name:"password",type:"password",required:"",autocomplete:"new-password",modelValue:s.value.password,"onUpdate:modelValue":e[2]||(e[2]=t=>s.value.password=t)},null,8,["modelValue"]),a(u,{message:n.password},null,8,["message"])])),l.isEdit?_("",!0):(f(),y("div",G,[a(o(c),{for:"password_confirmation"},{default:i(()=>[...e[7]||(e[7]=[d("Confirmar contraseña",-1)])]),_:1}),a(o(p),{id:"password_confirmation",name:"password_confirmation",type:"password",required:"",autocomplete:"new-password",modelValue:s.value.password_confirmation,"onUpdate:modelValue":e[3]||(e[3]=t=>s.value.password_confirmation=t)},null,8,["modelValue"]),a(u,{message:n.password_confirmation},null,8,["message"])])),a(o(x),{type:"submit",class:"w-full",disabled:v},{default:i(()=>[v?(f(),V(o($),{key:0,class:"h-4 w-4 animate-spin mr-2"})):_("",!0),d(" "+N(l.isEdit?"Actualizar usuario":"Crear usuario"),1)]),_:2},1032,["disabled"])])]),_:1},8,["data"]))}});export{J as _};
