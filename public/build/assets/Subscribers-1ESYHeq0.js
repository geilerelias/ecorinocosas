import{d as _,r as x,c as w,b as o,u as n,i as y,w as E,a as S,F as k,k as a,o as C}from"./app-D26Fj0MA.js";import{_ as B}from"./AppLayout.vue_vue_type_script_setup_true_lang-DOIGjuRA.js";import{_ as v}from"./DataTable.vue_vue_type_script_setup_true_lang-CiH2WX1N.js";import{u as T}from"./useGlobalMessage-CLBK3flu.js";import{d as $}from"./index-DHaENg3J.js";import{R as D}from"./refresh-ccw-CDDUqUWe.js";import{P as M,T as z}from"./trash-2-C-d2sTck.js";import"./utils-TfETDaq2.js";import"./_plugin-vue_export-helper-OG9Yok-y.js";import"./createLucideIcon-B0QnjMXY.js";import"./useForwardExpose-DxE1Pvs9.js";import"./VisuallyHidden-lWdoxgFr.js";import"./index-CPk5dEKH.js";import"./RovingFocusGroup-DbTDTMiX.js";import"./x-C9NMnROS.js";import"./useArrowNavigation-C6Y-ieo6.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BdXAKHVs.js";import"./sweetalert2.esm.all-NNS-RXd7.js";const F={class:"w-full p-4"},Y=_({__name:"Subscribers",props:{subscribers:{}},setup(l){const m=l,i=x([]),{showGlobalMessage:r,showConfirmMessage:c}=T(),u=[{key:"id",label:"ID"},{key:"email",label:"Correo electrónico"},{key:"created_at",label:"Fecha de suscripción"}],d=[{icon:M,color:"text-blue-600 hover:text-blue-800",onClick:e=>h(e)},{icon:z,color:"text-red-600 hover:text-red-800",onClick:e=>f(e.id)}],p=()=>{a.reload({onSuccess:()=>r({message:"Lista actualizada correctamente.",type:"success"}),onError:()=>r({message:"Error al actualizar lista.",type:"error"})})},f=async e=>{await c({title:"¿Eliminar suscriptor?",text:"Esta acción no se puede deshacer.",confirmButtonText:"Eliminar",cancelButtonText:"Cancelar",icon:"warning"})&&a.delete(`/admin/subscribers/${e}`,{onSuccess:()=>r({message:"Suscriptor eliminado correctamente.",type:"success"}),onError:()=>r({message:"Error al eliminar el suscriptor.",type:"error"})})},b=async e=>{if(e.length===0){r({message:"No hay suscriptores seleccionados.",type:"warning"});return}await c({title:"¿Eliminar seleccionados?",text:`Se eliminarán ${e.length} suscriptores.`,confirmButtonText:"Eliminar todo",cancelButtonText:"Cancelar",icon:"warning"})&&(await Promise.all(e.map(s=>a.delete(`/admin/subscribers/${s}`,{preserveScroll:!0}))),r({message:"Suscriptores eliminados correctamente.",type:"success"}),i.value=[])},h=e=>{r({message:`Editar suscriptor: ${e.email}`,type:"info"})},g=[{title:"Dashboard",href:$().url},{title:"Suscriptores",href:"/admin/subscribers"}];return(e,t)=>(C(),w(k,null,[o(n(y),{title:"Suscriptores"}),o(B,{breadcrumbs:g},{default:E(()=>[S("div",F,[o(v,{title:"Suscriptores",data:m.subscribers,columns:u,actions:d,selectable:"","show-add-button":"","add-button-text":"Actualizar","add-button-icon":n(D),onAdd:p,"onUpdate:selected":t[0]||(t[0]=s=>i.value=s),onDeleteMultiple:b},null,8,["data","add-button-icon"])])]),_:1})],64))}});export{Y as default};
